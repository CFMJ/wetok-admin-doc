import{_ as s,o as a,c as n,a as l}from"./app.0019032b.js";const A=JSON.parse('{"title":"\u6587\u6863\u76F8\u5173","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u6587\u6863\u81EA\u52A8\u90E8\u7F72","slug":"\u6587\u6863\u81EA\u52A8\u90E8\u7F72"},{"level":3,"title":"GitHub Pages and GitHub Actions","slug":"github-pages-and-github-actions"},{"level":3,"title":"GitLab Pages and GitLab CI","slug":"gitlab-pages-and-gitlab-ci"}],"relativePath":"views/about_docs.md","lastUpdated":1669864177000}'),p={name:"views/about_docs.md"},o=l(`<h1 id="\u6587\u6863\u76F8\u5173" tabindex="-1">\u6587\u6863\u76F8\u5173 <a class="header-anchor" href="#\u6587\u6863\u76F8\u5173" aria-hidden="true">#</a></h1><p>\u672C\u6587\u6863\u57FA\u4E8E <code>vitepress</code> \u6784\u5EFA.</p><ul><li><a href="https://vitepress.vuejs.org/" target="_blank" rel="noopener noreferrer">vitepress \u5B98\u65B9\u6587\u6863</a></li></ul><h2 id="\u6587\u6863\u81EA\u52A8\u90E8\u7F72" tabindex="-1">\u6587\u6863\u81EA\u52A8\u90E8\u7F72 <a class="header-anchor" href="#\u6587\u6863\u81EA\u52A8\u90E8\u7F72" aria-hidden="true">#</a></h2><p>\u4ECB\u7ECD doc \u914D\u7F6E GitHub Pages \u548C GitHub Actions \u81EA\u52A8\u5316\u90E8\u7F72,GitLab Pages \u548C GitLab CI \u81EA\u52A8\u5316\u90E8\u7F72.</p><h3 id="github-pages-and-github-actions" tabindex="-1">GitHub Pages and GitHub Actions <a class="header-anchor" href="#github-pages-and-github-actions" aria-hidden="true">#</a></h3><ul><li>\u521B\u5EFA Actions Secrets</li></ul><p>\u521B\u5EFA\u4E00\u4E2A <code>personal access token</code>,\u53C2\u8003 <a href="https://github.blog/changelog/2021-07-26-expiration-options-for-personal-access-tokens/" target="_blank" rel="noopener noreferrer">github token</a>.</p><p><img src="https://github.com/cfmj/doc-images/blob/main/images/github-pages/token-create.gif?raw=true" alt="New personal access token"></p><p>\u751F\u6210\u540E\uFF0C\u6253\u5F00 Git \u9879\u76EE\u7684\u8BBE\u7F6E <code>Settings</code>\uFF0C\u9009\u62E9 <code>Secrets</code> \u9009\u9879\u4E0B\u7684 <code>Actions</code> \u65B0\u5EFA Actions secrets\uFF0C\u5C06\u751F\u6210\u7684 token \u5185\u5BB9\u586B\u5165:</p><p><img src="https://github.com/cfmj/doc-images/blob/main/images/github-pages/create-actions-secrets.png?raw=true" alt="create-actions-secrets"></p><ul><li><p>\u65B0\u5EFA Action</p><p>\u5173\u4E8E\u90E8\u7F72 pages \u7684\u914D\u7F6E\u65B9\u6CD5,\u53C2\u8003 vitepress \u5B98\u7F51 <a href="https://vitepress.vuejs.org/guide/deploy.html#github-pages" target="_blank" rel="noopener noreferrer">github-pages</a>.</p></li></ul><ol><li><p>\u5728 doc \u4EE3\u7801\u7684 <code>docs/.vitepress/config.js</code> \u4E2D\u8BBE\u7F6E\u6B63\u786E\u7684 <code>base</code> \u9009\u9879\u3002</p><p>\u5982\u679C\u4F60\u51C6\u5907\u53D1\u5E03\u5230 <code>https://&lt;USERNAME&gt;.github.io/</code> \uFF0C\u4F60\u53EF\u4EE5\u7701\u7565\u8FD9\u4E00\u6B65\uFF0C\u56E0\u4E3A <code>base</code> \u9ED8\u8BA4\u5C31\u662F <code>&quot;/&quot;</code> \u3002</p><p>\u5982\u679C\u4F60\u51C6\u5907\u53D1\u5E03\u5230 <code>https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;/</code> \uFF0C\u4E5F\u5C31\u662F\u8BF4\u4F60\u7684\u4ED3\u5E93\u5730\u5740\u662F <code>https://github.com/&lt;USERNAME&gt;/&lt;REPO&gt;</code> \uFF0C\u5219\u5C06 <code>base</code> \u8BBE\u7F6E\u4E3A <code>&quot;/&lt;REPO&gt;/&quot;</code>\u3002</p></li><li><p>\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684 <code>.github/workflows</code> \u76EE\u5F55\uFF08\u6CA1\u6709\u7684\u8BDD\uFF0C\u8BF7\u624B\u52A8\u521B\u5EFA\u4E00\u4E2A\uFF09\u4E0B\u521B\u5EFA\u4E00\u4E2A <code>.yml</code> \u6216\u8005 <code>.yaml</code> \u6587\u4EF6\uFF0C\u5982: <code>vuepress-deploy.yml</code> ,\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/guide/deployment.html#github-pages" target="_blank" rel="noopener noreferrer">vuepress</a> \u548C <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a>.</p></li></ol><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9CAC;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># \u6BCF\u5F53 push \u5230 master \u5206\u652F\u65F6\u89E6\u53D1\u90E8\u7F72</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#C3E88D;">master</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># \u624B\u52A8\u89E6\u53D1\u90E8\u7F72</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">workflow_dispatch</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">docs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">runs-on</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># \u6267\u884C\u7684\u6B65\u9AA4</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/checkout@v2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># \u201C\u6700\u8FD1\u66F4\u65B0\u65F6\u95F4\u201D \u7B49 git \u65E5\u5FD7\u76F8\u5173\u4FE1\u606F\uFF0C\u9700\u8981\u62C9\u53D6\u5168\u90E8\u63D0\u4EA4\u8BB0\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">fetch-depth</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Setup Node.js</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/setup-node@v1</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># \u9009\u62E9\u8981\u4F7F\u7528\u7684 node \u7248\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">node-version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">14</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u7F13\u5B58 node_modules</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Cache dependencies</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/cache@v2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yarn-cache</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">|</span></span>
<span class="line"><span style="color:#C3E88D;">            **/node_modules</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ runner.os }}-yarn-\${{ hashFiles(&#39;**/yarn.lock&#39;) }}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">restore-keys</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">|</span></span>
<span class="line"><span style="color:#C3E88D;">            \${{ runner.os }}-yarn-</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u5982\u679C\u7F13\u5B58\u6CA1\u6709\u547D\u4E2D\uFF0C\u5B89\u88C5\u4F9D\u8D56</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Install dependencies</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">if</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">steps.yarn-cache.outputs.cache-hit != &#39;true&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yarn --frozen-lockfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u8FD0\u884C\u6784\u5EFA\u811A\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Build VuePress site</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yarn docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u67E5\u770B workflow \u7684\u6587\u6863\u6765\u83B7\u53D6\u66F4\u591A\u4FE1\u606F</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># @see https://github.com/crazy-max/ghaction-github-pages</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Deploy to GitHub Pages</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">crazy-max/ghaction-github-pages@v2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># \u90E8\u7F72\u5230 gh-pages \u5206\u652F</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">target_branch</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gh-pages</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># \u6253\u5305\u76EE\u5F55,\u9ED8\u8BA4\u76EE\u5F55\u4E3Adocs/.vitepress/dist</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">build_dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs/.vitepress/dist</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">env</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">GITHUB_TOKEN</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"></span></code></pre></div><blockquote><p><code>secrets.GITHUB_TOKEN</code> \u662F \u4E0A\u4E00\u6B65\u521B\u5EFA\u7684 <code>Actions Secrets</code> \u5BC6\u94A5.</p></blockquote><p>\u6BCF\u5F53 <code>git push</code>\u6210\u529F\u65F6,Github Actions \u4F1A\u81EA\u52A8\u6267\u884C\u811A\u672C,\u81EA\u52A8\u6253\u5305\u90E8\u7F72\u6700\u65B0\u7684\u4EE3\u7801,\u53D1\u5E03\u5230\u4F60\u7684 Github Page \u4E0A.</p><p>\u53EF\u4EE5\u5728 <code>Settings</code>\u7684<code>Pages</code>\u9009\u9879\u4E2D,\u67E5\u770B\u6587\u6863\u94FE\u63A5\u5730\u5740.</p><h3 id="gitlab-pages-and-gitlab-ci" tabindex="-1">GitLab Pages and GitLab CI <a class="header-anchor" href="#gitlab-pages-and-gitlab-ci" aria-hidden="true">#</a></h3><ol><li>\u5728 <code>docs/.vuepress/config.js</code> \u4E2D\u8BBE\u7F6E\u6B63\u786E\u7684 <code>base</code>\u3002</li></ol><p>\u5982\u679C\u4F60\u6253\u7B97\u53D1\u5E03\u5230 <code>https://&lt;USERNAME or GROUP&gt;.gitlab.io/</code>\uFF0C\u5219\u53EF\u4EE5\u7701\u7565\u8FD9\u4E00\u6B65\uFF0C\u56E0\u4E3A <code>base</code> \u9ED8\u8BA4\u5373\u662F <code>&quot;/&quot;</code>\u3002</p><p>\u5982\u679C\u4F60\u6253\u7B97\u53D1\u5E03\u5230 <code>https://&lt;USERNAME or GROUP&gt;.gitlab.io/&lt;REPO&gt;/</code>\uFF08\u4E5F\u5C31\u662F\u8BF4\u4F60\u7684\u4ED3\u5E93\u5728 <code>https://gitlab.com/&lt;USERNAME&gt;/&lt;REPO&gt;</code>\uFF09\uFF0C\u5219\u5C06 <code>base</code> \u8BBE\u7F6E\u4E3A <code>&quot;/&lt;REPO&gt;/&quot;</code>\u3002</p><ol start="2"><li><p>\u5728 <code>.vuepress/config.js </code>\u4E2D\u5C06 <code>dest</code> \u8BBE\u7F6E\u4E3A <code>public</code>\u3002</p></li><li><p>\u5728\u4F60\u9879\u76EE\u7684\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A <code>.gitlab-ci.yml</code> \u7684\u6587\u4EF6\uFF0C\u65E0\u8BBA\u4F55\u65F6\u4F60\u63D0\u4EA4\u4E86\u66F4\u6539\uFF0C\u5B83\u90FD\u4F1A\u5E2E\u52A9\u4F60\u81EA\u52A8\u6784\u5EFA\u548C\u90E8\u7F72\uFF1A</p></li></ol><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:16.5.0</span></span>
<span class="line"><span style="color:#F07178;">pages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">deploy</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">cache</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">paths</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node_modules/</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yarn install</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># npm install</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yarn docs:build</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># npm run docs:build</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">artifacts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">paths</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">public</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">if</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH</span></span>
<span class="line"></span></code></pre></div><p>\u53C2\u8003 <a href="https://vitepress.vuejs.org/guide/deploy.html#gitlab-pages-and-gitlab-ci" target="_blank" rel="noopener noreferrer">vitepress gitlab-pages</a> ,\u540C\u6837\u6BCF\u5F53 <code>git push</code>\u6210\u529F\u65F6,GitLab CI \u4F1A\u81EA\u52A8\u6267\u884C\u811A\u672C,\u81EA\u52A8\u6253\u5305\u90E8\u7F72\u6700\u65B0\u7684\u4EE3\u7801,\u53D1\u5E03\u5230\u4F60\u7684 GitLab Page \u4E0A.</p><p>\u53EF\u4EE5\u5728 <code>Settings</code>\u7684<code>Pages</code>\u9009\u9879\u4E2D,\u67E5\u770B\u6587\u6863\u94FE\u63A5\u5730\u5740.</p>`,25),e=[o];function t(c,r,i,y,D,C){return a(),n("div",null,e)}var d=s(p,[["render",t]]);export{A as __pageData,d as default};
